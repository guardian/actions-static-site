{
  "version": "tree-0.1",
  "tree": {
    "id": "App",
    "path": "",
    "children": {
      "Tree": {
        "id": "Tree",
        "path": "Tree",
        "constructInfo": {
          "fqn": "constructs.Construct",
          "version": "10.1.155"
        }
      },
      "Static-Site-INFRA": {
        "id": "Static-Site-INFRA",
        "path": "Static-Site-INFRA",
        "children": {
          "static": {
            "id": "static",
            "path": "Static-Site-INFRA/static",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/static/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::S3::Bucket",
                  "aws:cdk:cloudformation:props": {
                    "tags": [
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ],
                    "websiteConfiguration": {
                      "indexDocument": "index.html"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_s3.CfnBucket",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_s3.Bucket",
              "version": "2.50.0"
            }
          },
          "DistributionBucketName": {
            "id": "DistributionBucketName",
            "path": "Static-Site-INFRA/DistributionBucketName",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "AnghammaradSnsArn": {
            "id": "AnghammaradSnsArn",
            "path": "Static-Site-INFRA/AnghammaradSnsArn",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "VpcId": {
            "id": "VpcId",
            "path": "Static-Site-INFRA/VpcId",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "VPCStaticsiteinfra": {
            "id": "VPCStaticsiteinfra",
            "path": "Static-Site-INFRA/VPCStaticsiteinfra",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.50.0"
            }
          },
          "static-site-infraPrivateSubnets": {
            "id": "static-site-infraPrivateSubnets",
            "path": "Static-Site-INFRA/static-site-infraPrivateSubnets",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "subnet-#{Token[TOKEN.373]}": {
            "id": "subnet-#{Token[TOKEN.373]}",
            "path": "Static-Site-INFRA/subnet-#{Token[TOKEN.373]}",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.50.0"
            }
          },
          "static-site-infraPublicSubnets": {
            "id": "static-site-infraPublicSubnets",
            "path": "Static-Site-INFRA/static-site-infraPublicSubnets",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "subnet-#{Token[TOKEN.376]}": {
            "id": "subnet-#{Token[TOKEN.376]}",
            "path": "Static-Site-INFRA/subnet-#{Token[TOKEN.376]}",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.50.0"
            }
          },
          "static-site-infra": {
            "id": "static-site-infra",
            "path": "Static-Site-INFRA/static-site-infra",
            "constructInfo": {
              "fqn": "constructs.Construct",
              "version": "10.1.155"
            }
          },
          "CertificateStaticsiteinfra": {
            "id": "CertificateStaticsiteinfra",
            "path": "Static-Site-INFRA/CertificateStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/CertificateStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::CertificateManager::Certificate",
                  "aws:cdk:cloudformation:props": {
                    "domainName": "static-site.gutools.co.uk",
                    "tags": [
                      {
                        "key": "App",
                        "value": "static-site-infra"
                      },
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Name",
                        "value": "Static-Site-INFRA/CertificateStaticsiteinfra"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ],
                    "validationMethod": "DNS"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_certificatemanager.CfnCertificate",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_certificatemanager.Certificate",
              "version": "2.50.0"
            }
          },
          "InstanceRoleStaticsiteinfra": {
            "id": "InstanceRoleStaticsiteinfra",
            "path": "Static-Site-INFRA/InstanceRoleStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/InstanceRoleStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                  "aws:cdk:cloudformation:props": {
                    "assumeRolePolicyDocument": {
                      "Statement": [
                        {
                          "Action": "sts:AssumeRole",
                          "Effect": "Allow",
                          "Principal": {
                            "Service": "ec2.amazonaws.com"
                          }
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "path": "/",
                    "tags": [
                      {
                        "key": "App",
                        "value": "static-site-infra"
                      },
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnRole",
                  "version": "2.50.0"
                }
              },
              "DefaultPolicy": {
                "id": "DefaultPolicy",
                "path": "Static-Site-INFRA/InstanceRoleStaticsiteinfra/DefaultPolicy",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "Static-Site-INFRA/InstanceRoleStaticsiteinfra/DefaultPolicy/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                      "aws:cdk:cloudformation:props": {
                        "policyDocument": {
                          "Statement": [
                            {
                              "Action": [
                                "s3:GetObject*",
                                "s3:GetBucket*",
                                "s3:List*"
                              ],
                              "Effect": "Allow",
                              "Resource": [
                                {
                                  "Fn::GetAtt": [
                                    "staticD8C87B36",
                                    "Arn"
                                  ]
                                },
                                {
                                  "Fn::Join": [
                                    "",
                                    [
                                      {
                                        "Fn::GetAtt": [
                                          "staticD8C87B36",
                                          "Arn"
                                        ]
                                      },
                                      "/*"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "Version": "2012-10-17"
                        },
                        "policyName": "InstanceRoleStaticsiteinfraDefaultPolicy2FFC3831",
                        "roles": [
                          {
                            "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                      "version": "2.50.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.Policy",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Role",
              "version": "2.50.0"
            }
          },
          "SSMRunCommandPolicy": {
            "id": "SSMRunCommandPolicy",
            "path": "Static-Site-INFRA/SSMRunCommandPolicy",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/SSMRunCommandPolicy/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": [
                            "ec2messages:AcknowledgeMessage",
                            "ec2messages:DeleteMessage",
                            "ec2messages:FailMessage",
                            "ec2messages:GetEndpoint",
                            "ec2messages:GetMessages",
                            "ec2messages:SendReply",
                            "ssm:UpdateInstanceInformation",
                            "ssm:ListInstanceAssociations",
                            "ssm:DescribeInstanceProperties",
                            "ssm:DescribeDocumentParameters",
                            "ssmmessages:CreateControlChannel",
                            "ssmmessages:CreateDataChannel",
                            "ssmmessages:OpenControlChannel",
                            "ssmmessages:OpenDataChannel"
                          ],
                          "Effect": "Allow",
                          "Resource": "*"
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "ssm-run-command-policy",
                    "roles": [
                      {
                        "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.50.0"
            }
          },
          "DescribeEC2Policy": {
            "id": "DescribeEC2Policy",
            "path": "Static-Site-INFRA/DescribeEC2Policy",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/DescribeEC2Policy/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": [
                            "autoscaling:DescribeAutoScalingInstances",
                            "autoscaling:DescribeAutoScalingGroups",
                            "ec2:DescribeTags",
                            "ec2:DescribeInstances"
                          ],
                          "Effect": "Allow",
                          "Resource": "*"
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "describe-ec2-policy",
                    "roles": [
                      {
                        "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.50.0"
            }
          },
          "LoggingStreamName": {
            "id": "LoggingStreamName",
            "path": "Static-Site-INFRA/LoggingStreamName",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "GuLogShippingPolicy": {
            "id": "GuLogShippingPolicy",
            "path": "Static-Site-INFRA/GuLogShippingPolicy",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/GuLogShippingPolicy/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": [
                            "kinesis:Describe*",
                            "kinesis:Put*"
                          ],
                          "Effect": "Allow",
                          "Resource": {
                            "Fn::Join": [
                              "",
                              [
                                "arn:aws:kinesis:eu-west-1:",
                                {
                                  "Ref": "AWS::AccountId"
                                },
                                ":stream/",
                                {
                                  "Ref": "LoggingStreamName"
                                }
                              ]
                            ]
                          }
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "GuLogShippingPolicy981BFE5A",
                    "roles": [
                      {
                        "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.50.0"
            }
          },
          "GetDistributablePolicyStaticsiteinfra": {
            "id": "GetDistributablePolicyStaticsiteinfra",
            "path": "Static-Site-INFRA/GetDistributablePolicyStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/GetDistributablePolicyStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": "s3:GetObject",
                          "Effect": "Allow",
                          "Resource": {
                            "Fn::Join": [
                              "",
                              [
                                "arn:aws:s3:::",
                                {
                                  "Ref": "DistributionBucketName"
                                },
                                "/deploy/INFRA/static-site-infra/*"
                              ]
                            ]
                          }
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "GetDistributablePolicyStaticsiteinfra9CEB8175",
                    "roles": [
                      {
                        "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.50.0"
            }
          },
          "ParameterStoreReadStaticsiteinfra": {
            "id": "ParameterStoreReadStaticsiteinfra",
            "path": "Static-Site-INFRA/ParameterStoreReadStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/ParameterStoreReadStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": "ssm:GetParametersByPath",
                          "Effect": "Allow",
                          "Resource": {
                            "Fn::Join": [
                              "",
                              [
                                "arn:aws:ssm:eu-west-1:",
                                {
                                  "Ref": "AWS::AccountId"
                                },
                                ":parameter/INFRA/deploy/static-site-infra"
                              ]
                            ]
                          }
                        },
                        {
                          "Action": [
                            "ssm:GetParameters",
                            "ssm:GetParameter"
                          ],
                          "Effect": "Allow",
                          "Resource": {
                            "Fn::Join": [
                              "",
                              [
                                "arn:aws:ssm:eu-west-1:",
                                {
                                  "Ref": "AWS::AccountId"
                                },
                                ":parameter/INFRA/deploy/static-site-infra/*"
                              ]
                            ]
                          }
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "parameter-store-read-policy",
                    "roles": [
                      {
                        "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.50.0"
            }
          },
          "AMIStaticsiteinfra": {
            "id": "AMIStaticsiteinfra",
            "path": "Static-Site-INFRA/AMIStaticsiteinfra",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "GuHttpsEgressSecurityGroupStaticsiteinfra": {
            "id": "GuHttpsEgressSecurityGroupStaticsiteinfra",
            "path": "Static-Site-INFRA/GuHttpsEgressSecurityGroupStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/GuHttpsEgressSecurityGroupStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                  "aws:cdk:cloudformation:props": {
                    "groupDescription": "Allow all outbound HTTPS traffic",
                    "securityGroupEgress": [
                      {
                        "cidrIp": "0.0.0.0/0",
                        "ipProtocol": "tcp",
                        "fromPort": 443,
                        "toPort": 443,
                        "description": "Allow all outbound HTTPS traffic"
                      }
                    ],
                    "tags": [
                      {
                        "key": "App",
                        "value": "static-site-infra"
                      },
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ],
                    "vpcId": {
                      "Ref": "VpcId"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                  "version": "2.50.0"
                }
              },
              "from StaticSiteINFRALoadBalancerStaticsiteinfraSecurityGroup603E3A0F:9000": {
                "id": "from StaticSiteINFRALoadBalancerStaticsiteinfraSecurityGroup603E3A0F:9000",
                "path": "Static-Site-INFRA/GuHttpsEgressSecurityGroupStaticsiteinfra/from StaticSiteINFRALoadBalancerStaticsiteinfraSecurityGroup603E3A0F:9000",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                  "aws:cdk:cloudformation:props": {
                    "ipProtocol": "tcp",
                    "description": "Load balancer to target",
                    "fromPort": 9000,
                    "groupId": {
                      "Fn::GetAtt": [
                        "GuHttpsEgressSecurityGroupStaticsiteinfraCB636C93",
                        "GroupId"
                      ]
                    },
                    "sourceSecurityGroupId": {
                      "Fn::GetAtt": [
                        "LoadBalancerStaticsiteinfraSecurityGroupDE5922F4",
                        "GroupId"
                      ]
                    },
                    "toPort": 9000
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
              "version": "2.50.0"
            }
          },
          "AutoScalingGroupStaticsiteinfra": {
            "id": "AutoScalingGroupStaticsiteinfra",
            "path": "Static-Site-INFRA/AutoScalingGroupStaticsiteinfra",
            "children": {
              "InstanceProfile": {
                "id": "InstanceProfile",
                "path": "Static-Site-INFRA/AutoScalingGroupStaticsiteinfra/InstanceProfile",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::InstanceProfile",
                  "aws:cdk:cloudformation:props": {
                    "roles": [
                      {
                        "Ref": "InstanceRoleStaticsiteinfra4F680EB5"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnInstanceProfile",
                  "version": "2.50.0"
                }
              },
              "LaunchConfig": {
                "id": "LaunchConfig",
                "path": "Static-Site-INFRA/AutoScalingGroupStaticsiteinfra/LaunchConfig",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::AutoScaling::LaunchConfiguration",
                  "aws:cdk:cloudformation:props": {
                    "imageId": {
                      "Ref": "AMIStaticsiteinfra"
                    },
                    "instanceType": "t4g.nano",
                    "iamInstanceProfile": {
                      "Ref": "AutoScalingGroupStaticsiteinfraInstanceProfileF0018DB3"
                    },
                    "metadataOptions": {
                      "httpTokens": "required"
                    },
                    "securityGroups": [
                      {
                        "Fn::GetAtt": [
                          "GuHttpsEgressSecurityGroupStaticsiteinfraCB636C93",
                          "GroupId"
                        ]
                      },
                      {
                        "Fn::GetAtt": [
                          "WazuhSecurityGroup",
                          "GroupId"
                        ]
                      }
                    ],
                    "userData": {
                      "Fn::Base64": {
                        "Fn::Join": [
                          "",
                          [
                            "#!/bin/bash -ev\ncat << EOF > /etc/systemd/system/static-site-infra.service\n[Unit]\nDescription=CDK Metadata\n\n[Service]\nEnvironment=\"PORT=9000\"\nExecStart=/static-site-infra\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\naws s3 cp s3://",
                            {
                              "Ref": "DistributionBucketName"
                            },
                            "/deploy/INFRA/static-site-infra/static-site-infra /static-site-infra\nchmod +x /static-site-infra\nsystemctl start static-site-infra\n"
                          ]
                        ]
                      }
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_autoscaling.CfnLaunchConfiguration",
                  "version": "2.50.0"
                }
              },
              "ASG": {
                "id": "ASG",
                "path": "Static-Site-INFRA/AutoScalingGroupStaticsiteinfra/ASG",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::AutoScaling::AutoScalingGroup",
                  "aws:cdk:cloudformation:props": {
                    "maxSize": "2",
                    "minSize": "1",
                    "healthCheckGracePeriod": 120,
                    "healthCheckType": "ELB",
                    "launchConfigurationName": {
                      "Ref": "AutoScalingGroupStaticsiteinfraLaunchConfig402CF24B"
                    },
                    "tags": [
                      {
                        "key": "App",
                        "value": "static-site-infra",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "gu:cdk:pattern-name",
                        "value": "GuEc2App",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "LogKinesisStreamName",
                        "value": {
                          "Ref": "LoggingStreamName"
                        },
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "Name",
                        "value": "Static-Site-INFRA/AutoScalingGroupStaticsiteinfra",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "Stack",
                        "value": "deploy",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA",
                        "propagateAtLaunch": true
                      },
                      {
                        "key": "SystemdUnit",
                        "value": "static-site-infra.service",
                        "propagateAtLaunch": true
                      }
                    ],
                    "targetGroupArns": [
                      {
                        "Ref": "TargetGroupStaticsiteinfra28811331"
                      }
                    ],
                    "vpcZoneIdentifier": {
                      "Ref": "staticsiteinfraPrivateSubnets"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_autoscaling.CfnAutoScalingGroup",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_autoscaling.AutoScalingGroup",
              "version": "2.50.0"
            }
          },
          "WazuhSecurityGroup": {
            "id": "WazuhSecurityGroup",
            "path": "Static-Site-INFRA/WazuhSecurityGroup",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/WazuhSecurityGroup/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                  "aws:cdk:cloudformation:props": {
                    "groupDescription": "Allow outbound traffic from wazuh agent to manager",
                    "securityGroupEgress": [
                      {
                        "cidrIp": "0.0.0.0/0",
                        "ipProtocol": "tcp",
                        "fromPort": 1514,
                        "toPort": 1514,
                        "description": "Wazuh event logging"
                      },
                      {
                        "cidrIp": "0.0.0.0/0",
                        "ipProtocol": "tcp",
                        "fromPort": 1515,
                        "toPort": 1515,
                        "description": "Wazuh agent registration"
                      }
                    ],
                    "tags": [
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ],
                    "vpcId": {
                      "Ref": "VpcId"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
              "version": "2.50.0"
            }
          },
          "LoadBalancerStaticsiteinfra": {
            "id": "LoadBalancerStaticsiteinfra",
            "path": "Static-Site-INFRA/LoadBalancerStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/LoadBalancerStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
                  "aws:cdk:cloudformation:props": {
                    "loadBalancerAttributes": [
                      {
                        "key": "deletion_protection.enabled",
                        "value": "true"
                      }
                    ],
                    "scheme": "internet-facing",
                    "securityGroups": [
                      {
                        "Fn::GetAtt": [
                          "LoadBalancerStaticsiteinfraSecurityGroupDE5922F4",
                          "GroupId"
                        ]
                      }
                    ],
                    "subnets": {
                      "Ref": "staticsiteinfraPublicSubnets"
                    },
                    "tags": [
                      {
                        "key": "App",
                        "value": "static-site-infra"
                      },
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ],
                    "type": "application"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer",
                  "version": "2.50.0"
                }
              },
              "SecurityGroup": {
                "id": "SecurityGroup",
                "path": "Static-Site-INFRA/LoadBalancerStaticsiteinfra/SecurityGroup",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "Static-Site-INFRA/LoadBalancerStaticsiteinfra/SecurityGroup/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                      "aws:cdk:cloudformation:props": {
                        "groupDescription": "Automatically created Security Group for ELB StaticSiteINFRALoadBalancerStaticsiteinfra606A4496",
                        "securityGroupIngress": [
                          {
                            "cidrIp": "0.0.0.0/0",
                            "ipProtocol": "tcp",
                            "fromPort": 443,
                            "toPort": 443,
                            "description": "Allow from anyone on port 443"
                          }
                        ],
                        "tags": [
                          {
                            "key": "App",
                            "value": "static-site-infra"
                          },
                          {
                            "key": "gu:cdk:version",
                            "value": "48.4.1"
                          },
                          {
                            "key": "gu:repo",
                            "value": "guardian/actions-static-site"
                          },
                          {
                            "key": "Stack",
                            "value": "deploy"
                          },
                          {
                            "key": "Stage",
                            "value": "INFRA"
                          }
                        ],
                        "vpcId": {
                          "Ref": "VpcId"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                      "version": "2.50.0"
                    }
                  },
                  "to StaticSiteINFRAGuHttpsEgressSecurityGroupStaticsiteinfraE4E95AE3:9000": {
                    "id": "to StaticSiteINFRAGuHttpsEgressSecurityGroupStaticsiteinfraE4E95AE3:9000",
                    "path": "Static-Site-INFRA/LoadBalancerStaticsiteinfra/SecurityGroup/to StaticSiteINFRAGuHttpsEgressSecurityGroupStaticsiteinfraE4E95AE3:9000",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
                      "aws:cdk:cloudformation:props": {
                        "groupId": {
                          "Fn::GetAtt": [
                            "LoadBalancerStaticsiteinfraSecurityGroupDE5922F4",
                            "GroupId"
                          ]
                        },
                        "ipProtocol": "tcp",
                        "description": "Load balancer to target",
                        "destinationSecurityGroupId": {
                          "Fn::GetAtt": [
                            "GuHttpsEgressSecurityGroupStaticsiteinfraCB636C93",
                            "GroupId"
                          ]
                        },
                        "fromPort": 9000,
                        "toPort": 9000
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress",
                      "version": "2.50.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
                  "version": "2.50.0"
                }
              },
              "LoadBalancerStaticsiteinfra-DnsName": {
                "id": "LoadBalancerStaticsiteinfra-DnsName",
                "path": "Static-Site-INFRA/LoadBalancerStaticsiteinfra/LoadBalancerStaticsiteinfra-DnsName",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer",
              "version": "2.50.0"
            }
          },
          "TargetGroupStaticsiteinfra": {
            "id": "TargetGroupStaticsiteinfra",
            "path": "Static-Site-INFRA/TargetGroupStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/TargetGroupStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::TargetGroup",
                  "aws:cdk:cloudformation:props": {
                    "healthCheckIntervalSeconds": 10,
                    "healthCheckPath": "/healthcheck",
                    "healthCheckProtocol": "HTTP",
                    "healthCheckTimeoutSeconds": 5,
                    "healthyThresholdCount": 5,
                    "port": 9000,
                    "protocol": "HTTP",
                    "tags": [
                      {
                        "key": "App",
                        "value": "static-site-infra"
                      },
                      {
                        "key": "gu:cdk:version",
                        "value": "48.4.1"
                      },
                      {
                        "key": "gu:repo",
                        "value": "guardian/actions-static-site"
                      },
                      {
                        "key": "Stack",
                        "value": "deploy"
                      },
                      {
                        "key": "Stage",
                        "value": "INFRA"
                      }
                    ],
                    "targetGroupAttributes": [
                      {
                        "key": "deregistration_delay.timeout_seconds",
                        "value": "30"
                      },
                      {
                        "key": "stickiness.enabled",
                        "value": "false"
                      }
                    ],
                    "targetType": "instance",
                    "unhealthyThresholdCount": 2,
                    "vpcId": {
                      "Ref": "VpcId"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup",
              "version": "2.50.0"
            }
          },
          "ListenerStaticsiteinfra": {
            "id": "ListenerStaticsiteinfra",
            "path": "Static-Site-INFRA/ListenerStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/ListenerStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::Listener",
                  "aws:cdk:cloudformation:props": {
                    "defaultActions": [
                      {
                        "type": "authenticate-oidc",
                        "authenticateOidcConfig": {
                          "authorizationEndpoint": "https://accounts.google.com/o/oauth2/v2/auth",
                          "clientId": {
                            "Ref": "clientIDParameter"
                          },
                          "clientSecret": "{{resolve:secretsmanager:INFRA/deploy/static-site-infra/googleClientSecret:SecretString:::}}",
                          "issuer": "https://accounts.google.com",
                          "tokenEndpoint": "https://oauth2.googleapis.com/token",
                          "userInfoEndpoint": "https://openidconnect.googleapis.com/v1/userinfo",
                          "authenticationRequestExtraParams": {
                            "hd": "guardian.co.uk"
                          },
                          "scope": "openid email"
                        },
                        "order": 1
                      },
                      {
                        "type": "forward",
                        "targetGroupArn": {
                          "Ref": "TargetGroupStaticsiteinfra28811331"
                        },
                        "order": 2
                      }
                    ],
                    "loadBalancerArn": {
                      "Ref": "LoadBalancerStaticsiteinfraD54FBC6F"
                    },
                    "certificates": [
                      {
                        "certificateArn": {
                          "Ref": "CertificateStaticsiteinfra96FB258D"
                        }
                      }
                    ],
                    "port": 443,
                    "protocol": "HTTPS"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener",
              "version": "2.50.0"
            }
          },
          "High5xxPercentageAlarmStaticsiteinfra": {
            "id": "High5xxPercentageAlarmStaticsiteinfra",
            "path": "Static-Site-INFRA/High5xxPercentageAlarmStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/High5xxPercentageAlarmStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::CloudWatch::Alarm",
                  "aws:cdk:cloudformation:props": {
                    "comparisonOperator": "GreaterThanThreshold",
                    "evaluationPeriods": 60,
                    "actionsEnabled": true,
                    "alarmActions": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:aws:sns:eu-west-1:",
                            {
                              "Ref": "AWS::AccountId"
                            },
                            ":",
                            {
                              "Ref": "AnghammaradSnsArn"
                            }
                          ]
                        ]
                      }
                    ],
                    "alarmDescription": "static-site-infra exceeded 1% error rate",
                    "alarmName": "High 5XX error % from static-site-infra in INFRA",
                    "metrics": [
                      {
                        "expression": "100*(m1+m2)/m3",
                        "id": "expr_1",
                        "label": "% of 5XX responses served for static-site-infra (load balancer and instances combined)"
                      },
                      {
                        "metricStat": {
                          "metric": {
                            "metricName": "HTTPCode_ELB_5XX_Count",
                            "namespace": "AWS/ApplicationELB",
                            "dimensions": [
                              {
                                "name": "LoadBalancer",
                                "value": {
                                  "Fn::GetAtt": [
                                    "LoadBalancerStaticsiteinfraD54FBC6F",
                                    "LoadBalancerFullName"
                                  ]
                                }
                              }
                            ]
                          },
                          "period": 60,
                          "stat": "Sum"
                        },
                        "id": "m1",
                        "returnData": false
                      },
                      {
                        "metricStat": {
                          "metric": {
                            "metricName": "HTTPCode_Target_5XX_Count",
                            "namespace": "AWS/ApplicationELB",
                            "dimensions": [
                              {
                                "name": "LoadBalancer",
                                "value": {
                                  "Fn::GetAtt": [
                                    "LoadBalancerStaticsiteinfraD54FBC6F",
                                    "LoadBalancerFullName"
                                  ]
                                }
                              }
                            ]
                          },
                          "period": 60,
                          "stat": "Sum"
                        },
                        "id": "m2",
                        "returnData": false
                      },
                      {
                        "metricStat": {
                          "metric": {
                            "metricName": "RequestCount",
                            "namespace": "AWS/ApplicationELB",
                            "dimensions": [
                              {
                                "name": "LoadBalancer",
                                "value": {
                                  "Fn::GetAtt": [
                                    "LoadBalancerStaticsiteinfraD54FBC6F",
                                    "LoadBalancerFullName"
                                  ]
                                }
                              }
                            ]
                          },
                          "period": 60,
                          "stat": "Sum"
                        },
                        "id": "m3",
                        "returnData": false
                      }
                    ],
                    "threshold": 1,
                    "treatMissingData": "notBreaching"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_cloudwatch.CfnAlarm",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_cloudwatch.Alarm",
              "version": "2.50.0"
            }
          },
          "SnsTopicForHigh5xxPercentageAlarmStaticsiteinfra": {
            "id": "SnsTopicForHigh5xxPercentageAlarmStaticsiteinfra",
            "path": "Static-Site-INFRA/SnsTopicForHigh5xxPercentageAlarmStaticsiteinfra",
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_sns.TopicBase",
              "version": "2.50.0"
            }
          },
          "UnhealthyInstancesAlarmStaticsiteinfra": {
            "id": "UnhealthyInstancesAlarmStaticsiteinfra",
            "path": "Static-Site-INFRA/UnhealthyInstancesAlarmStaticsiteinfra",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "Static-Site-INFRA/UnhealthyInstancesAlarmStaticsiteinfra/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::CloudWatch::Alarm",
                  "aws:cdk:cloudformation:props": {
                    "comparisonOperator": "GreaterThanOrEqualToThreshold",
                    "evaluationPeriods": 60,
                    "actionsEnabled": true,
                    "alarmActions": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:aws:sns:eu-west-1:",
                            {
                              "Ref": "AWS::AccountId"
                            },
                            ":",
                            {
                              "Ref": "AnghammaradSnsArn"
                            }
                          ]
                        ]
                      }
                    ],
                    "alarmDescription": "static-site-infra's instances have failed healthchecks several times over the last 1 hour.\n      This typically results in the AutoScaling Group cycling instances and can lead to problems with deployment,\n      scaling or handling traffic spikes.\n\n      Check static-site-infra's application logs or ssh onto an unhealthy instance in order to debug these problems.",
                    "alarmName": "Unhealthy instances for static-site-infra in INFRA",
                    "datapointsToAlarm": 30,
                    "dimensions": [
                      {
                        "name": "LoadBalancer",
                        "value": {
                          "Fn::Join": [
                            "",
                            [
                              {
                                "Fn::Select": [
                                  1,
                                  {
                                    "Fn::Split": [
                                      "/",
                                      {
                                        "Ref": "ListenerStaticsiteinfraF9A47E6B"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "/",
                              {
                                "Fn::Select": [
                                  2,
                                  {
                                    "Fn::Split": [
                                      "/",
                                      {
                                        "Ref": "ListenerStaticsiteinfraF9A47E6B"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "/",
                              {
                                "Fn::Select": [
                                  3,
                                  {
                                    "Fn::Split": [
                                      "/",
                                      {
                                        "Ref": "ListenerStaticsiteinfraF9A47E6B"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          ]
                        }
                      },
                      {
                        "name": "TargetGroup",
                        "value": {
                          "Fn::GetAtt": [
                            "TargetGroupStaticsiteinfra28811331",
                            "TargetGroupFullName"
                          ]
                        }
                      }
                    ],
                    "metricName": "UnHealthyHostCount",
                    "namespace": "AWS/ApplicationELB",
                    "period": 60,
                    "statistic": "Maximum",
                    "threshold": 1,
                    "treatMissingData": "notBreaching"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_cloudwatch.CfnAlarm",
                  "version": "2.50.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_cloudwatch.Alarm",
              "version": "2.50.0"
            }
          },
          "SnsTopicForUnhealthyInstancesAlarmStaticsiteinfra": {
            "id": "SnsTopicForUnhealthyInstancesAlarmStaticsiteinfra",
            "path": "Static-Site-INFRA/SnsTopicForUnhealthyInstancesAlarmStaticsiteinfra",
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_sns.TopicBase",
              "version": "2.50.0"
            }
          },
          "static-site.gutools.co.uk-DnsRecordSet": {
            "id": "static-site.gutools.co.uk-DnsRecordSet",
            "path": "Static-Site-INFRA/static-site.gutools.co.uk-DnsRecordSet",
            "constructInfo": {
              "fqn": "constructs.Construct",
              "version": "10.1.155"
            }
          },
          "DNS": {
            "id": "DNS",
            "path": "Static-Site-INFRA/DNS",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnResource",
              "version": "2.50.0"
            }
          },
          "clientID.Parameter": {
            "id": "clientID.Parameter",
            "path": "Static-Site-INFRA/clientID.Parameter",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.50.0"
            }
          },
          "clientID": {
            "id": "clientID",
            "path": "Static-Site-INFRA/clientID",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.50.0"
            }
          }
        },
        "constructInfo": {
          "fqn": "aws-cdk-lib.Stack",
          "version": "2.50.0"
        }
      }
    },
    "constructInfo": {
      "fqn": "aws-cdk-lib.App",
      "version": "2.50.0"
    }
  }
}